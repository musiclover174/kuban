!function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";function o(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:document).querySelector(e)}function r(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:document).querySelectorAll(e)}function i(){var e=document.querySelectorAll("table"),t=[];e.length&&(e.forEach(function(e,n){var o=e.outerHTML;e.outerHTML="<div class='table-scroller".concat(n,"'>").concat(o,"</div>");var r=new PerfectScrollbar(".table-scroller".concat(n),{wheelPropagation:!0});t.push(r)}),window.addEventListener("resize",function(){t.length&&t.forEach(function(e,t){e.update()})}))}function a(e){window.addEventListener("scroll",function(){var t,n,o=!0,r=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(o=(a=s.next()).done);o=!0){var c=a.value,l=!0,u=!1,d=void 0;try{for(var p,m=document.querySelectorAll(c)[Symbol.iterator]();!(l=(p=m.next()).done);l=!0){var f=p.value;n=void 0,(n=(t=f).getBoundingClientRect()).bottom-.35*t.offsetHeight<=(window.innerHeight||document.documentElement.clientHeight)&&n.right<=(window.innerWidth||document.documentElement.clientWidth)&&f.setAttribute("visible",!0)}}catch(e){u=!0,d=e}finally{try{l||null==m.return||m.return()}finally{if(u)throw d}}}}catch(e){r=!0,i=e}finally{try{o||null==s.return||s.return()}finally{if(r)throw i}}})}function s(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}n.r(t);var c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:25;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.block=document.querySelector(".js-loader"),this.products=document.querySelector(".products"),this.delay=t,this.preloadBlock=document.querySelector(".js-imgloader")}var t,n,o;return t=e,(n=[{key:"preload",value:function(){var e=this;Pace.on("hide",function(){!function(e,t,n){if(e)if(e.style.opacity=1,t)var o=1,r=setInterval(function(){(o-=50/t)<=0&&(clearInterval(r),o=0,e.style.display="none",n&&n()),e.style.opacity=o},50);else e.style.opacity=0,e.style.display="none",n&&n()}(e.block,600,function(){if(e.block.parentNode.removeChild(e.block),e.preloadBlock.parentNode.removeChild(e.preloadBlock),document.querySelector("html").classList.contains("touchevents")&&window.innerWidth<=500){var t=document.querySelector(".opening");t.parentNode.removeChild(t),document.body.classList.add("iload"),e.scrollLib(),e.textChanger()}else e.animate()})}),window.addEventListener("scroll",function(){(document.documentElement.scrollTop||document.body.scrollTop)>0?document.body.classList.add("scroll"):document.body.classList.remove("scroll")})}},{key:"animate",value:function(){var e=document.querySelectorAll(".js-opening-img"),t=this.delay;if(e.length>1)e[0].parentNode.removeChild(e[0]),setTimeout(this.animate.bind(this),t);else if(1===e.length){var n=document.querySelector(".opening");n.parentNode.removeChild(n),document.body.classList.add("iload"),this.scrollLib(),this.textChanger()}}},{key:"parallax",value:function(){var e,t,n,o;document.body.addEventListener("mousemove",function(r){e=Math.round(window.innerWidth/2),t=Math.round(window.innerHeight/2),n=-(r.clientX-e)/e,o=-(r.clientY-t)/t,TweenMax.to(Array.from(document.querySelectorAll(".bg__left, .bg__right")),2,{backgroundPosition:Math.round(10*n)+"px "+Math.round(20*o)+"px",ease:Expo.easeOut})})}},{key:"textChanger",value:function(){var e=parseInt(document.querySelector(".js-img-handler").style.height);document.querySelector(".handler__texts").classList.add("show");var t=new ScrollMagic.Controller;new ScrollMagic.Scene({triggerElement:".handler__texts",duration:.1*e,triggerHook:"onLeave"}).setClassToggle(".handler__texts","text1").addTo(t),new ScrollMagic.Scene({triggerElement:".handler__texts",offset:.13*e,duration:.08*e,triggerHook:"onLeave"}).setClassToggle(".handler__texts","text2").addTo(t),new ScrollMagic.Scene({triggerElement:".handler__texts",offset:.27*e,duration:.1*e,triggerHook:"onLeave"}).setClassToggle(".handler__texts","text3").addTo(t),new ScrollMagic.Scene({triggerElement:".handler__texts",offset:.4*e,duration:.1*e,triggerHook:"onLeave"}).setClassToggle(".handler__texts","text4").addTo(t),new ScrollMagic.Scene({triggerElement:".handler__texts",offset:.6*e,duration:.05*e,triggerHook:"onLeave"}).setClassToggle(".handler__texts","text5").addTo(t),new ScrollMagic.Scene({triggerElement:".handler__texts",offset:.76*e,duration:.1*e,triggerHook:"onLeave"}).setClassToggle(".handler__texts","text6").addTo(t)}},{key:"scrollLib",value:function(){var e,t,n=100-window.innerHeight/100,o=1,r=document.querySelector(".js-progress"),i=document.querySelector(".js-bgleft"),a=document.querySelector(".js-bgright"),s=document.querySelector(".js-leftImg"),c=document.querySelector(".js-rightImg");document.querySelector(".js-img-handler").style.height=1e4+"px";window.addEventListener("scroll",function(){if(e=document.documentElement.scrollTop||document.body.scrollTop,(t=Math.ceil(e/n))<=100&&t>=0){0!==t&&(((o=Math.ceil(e/n))<36||o>61)&&(s.setAttribute("src","img/main/".concat(o,".png")),c.setAttribute("src","img/main/".concat(o,".png"))),36!==o&&61!==o||(s.setAttribute("src","img/main/".concat(o,"_left.png")),c.setAttribute("src","img/main/".concat(o,"_right.png"))));var l=Math.ceil(100*t/100),u=Math.ceil(100*(e+window.innerHeight)/document.body.scrollHeight);i.style.width=(l>=100?100:l)+"%",a.style.width=100-(l>100?100:l)+"%",a.style.left=(l>=100?100:l)+"%",r.style.height=u+"%"}})}}])&&s(t.prototype,n),o&&s(t,o),e}();function l(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.burgerEl=document.querySelector(".js-burger"),this.animationFlag=!1,this.init()}var t,n,o;return t=e,(n=[{key:"init",value:function(){var e=this;this.burgerEl.addEventListener("click",function(t){e.animationFlag||(e.animationFlag=!0,document.body.classList.toggle("burgeropen"),e.burgerEl.classList.contains("open")?(e.burgerEl.classList.add("remove"),setTimeout(function(){this.burgerEl.classList.remove("open","remove"),this.animationFlag=!1}.bind(e),1e3)):(e.burgerEl.classList.add("open"),setTimeout(function(){e.animationFlag=!1},700)),t.preventDefault())})}}])&&l(t.prototype,n),o&&l(t,o),e}();function d(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var p=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.el=document.querySelector(".js-contacts-map"),this.mapId=t}var t,n,o;return t=e,(n=[{key:"init",value:function(){var e=this;ymaps.ready(function(){var t=e.el.getAttribute("data-coords").split(", "),n=new ymaps.Map(e.mapId,{center:[parseFloat(t[0]),parseFloat(t[1])],zoom:window.innerWidth<=1e3?15:17,controls:["smallMapDefaultSet"]}),o=new ymaps.Placemark([parseFloat(t[0]),parseFloat(t[1])],{},{iconLayout:"default#image",iconImageSize:[54,67],iconImageHref:"/static/i/pin.png",iconImageOffset:[-32,-42]});n.behaviors.disable("scrollZoom"),n.geoObjects.add(o)})}}])&&d(t.prototype,n),o&&d(t,o),e}();function m(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var f=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.ts=t,this.bs=n,this.init()}var t,n,o;return t=e,(n=[{key:"init",value:function(){new StickySidebar(".js-sticky",{containerSelector:".js-sticky-parent",innerWrapperSelector:".js-sticky-inner",topSpacing:this.ts,bottomSpacing:this.bs})}}])&&m(t.prototype,n),o&&m(t,o),e}();function h(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var g=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,o=[{key:"popup",value:function(e){var t=window.innerWidth>626?626:window.innerWidth,n=window.innerWidth>626?window.innerWidth/2-313:0;window.open(e,"","toolbar=0,status=0,width=".concat(t,",height=436,left=").concat(n+window.screenLeft,", top=' + (top + window.screenTop)"))}}],(n=[{key:"vkontakte",value:function(e,t){var n="https://vk.com/share.php?";n+="url=".concat(encodeURIComponent(e)),n+="&title=".concat(encodeURIComponent(t)),this.constructor.popup(n)}},{key:"odnoklassniki",value:function(e,t){var n="http://www.odnoklassniki.ru/dk?st.cmd=addShare&st.s=1";n+="&st.comments=".concat(encodeURIComponent(t)),n+="&st._surl=".concat(encodeURIComponent(e)),this.constructor.popup(n)}},{key:"facebook",value:function(e,t,n,o){var r="http://www.facebook.com/sharer.php?s=100";r+="&p[title]=".concat(encodeURIComponent(t)),r+="&p[summary]=".concat(encodeURIComponent(o)),r+="&p[url]=".concat(encodeURIComponent(e)),r+="&p[images][0]=".concat(encodeURIComponent(n)),this.constructor.popup(r)}},{key:"twitter",value:function(e,t){var n="http://twitter.com/share?";n+="text=".concat(encodeURIComponent(t)),n+="&url=".concat(encodeURIComponent(e)),n+="&counturl=".concat(encodeURIComponent(e)),this.constructor.popup(n)}},{key:"mailru",value:function(e,t,n,o){var r="http://connect.mail.ru/share?";r+="url=".concat(encodeURIComponent(e)),r+="&title=".concat(encodeURIComponent(t)),r+="&description=".concat(encodeURIComponent(o)),r+="&imageurl=".concat(encodeURIComponent(n)),this.constructor.popup(r)}}])&&h(t.prototype,n),o&&h(t,o),e}();function v(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var y=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.init()}var t,n,o;return t=e,(n=[{key:"init",value:function(){document.querySelectorAll(".js-scenes-spacer");var e=document.querySelector(".js-scenes-positioner"),t=document.querySelector(".js-scenes");window.addEventListener("scroll",function(){var n=t.getBoundingClientRect(),o=(e.getBoundingClientRect(),getComputedStyle(t).height),r=getComputedStyle(e).height,i=(window.innerHeight||document.documentElement.clientHeight)/2,a=e.offsetHeight/2;n.top+a<=i?n.top+t.offsetHeight-a-i>0?(100*(parseInt(r)+parseInt(e.style.top))/parseInt(o),e.classList.remove("bottom"),e.classList.add("fixed")):(e.classList.remove("fixed"),e.classList.add("bottom")):(e.classList.remove("fixed","bottom"),e.removeAttribute("style"))});var n=new ScrollMagic.Controller,o=new ScrollMagic.Scene({triggerElement:'.js-scenes-spacer[data-step="1"]'}).setClassToggle(".js-scenes-positioner","scene1"),r=new ScrollMagic.Scene({triggerElement:'.js-scenes-spacer[data-step="2"]'}).setClassToggle(".js-scenes-positioner","scene2"),i=new ScrollMagic.Scene({triggerElement:'.js-scenes-spacer[data-step="3"]'}).setClassToggle(".js-scenes-positioner","scene3"),a=new ScrollMagic.Scene({triggerElement:'.js-scenes-spacer[data-step="4"]'}).setClassToggle(".js-scenes-positioner","scene4");n.addScene([o,r,i,a])}}])&&v(t.prototype,n),o&&v(t,o),e}();function w(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var b=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.carInit(),this.scrollListener()}var t,n,o;return t=e,(n=[{key:"carInit",value:function(){new Swiper(".js-iproducts",{loop:!0,speed:1200,slidesPerView:3,spaceBetween:60,loopedSlides:6,navigation:{nextEl:".js-iproducts ~ .swiper-button-next",prevEl:".js-iproducts ~ .swiper-button-prev"},breakpoints:{900:{autoHeight:!0}}})}},{key:"scrollListener",value:function(){window.addEventListener("scroll",function(){document.documentElement.offsetHeight-window.pageYOffset===window.innerHeight?document.body.classList.add("scrollEnd"):document.body.classList.remove("scrollEnd")})}}])&&w(t.prototype,n),o&&w(t,o),e}();function S(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function L(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function k(e,t,n){return t&&L(e.prototype,t),n&&L(e,n),e}var E=o(".js-game"),j=o(".js-game-time"),C=o(".js-game-score"),_=o(".js-game-restart"),x=o(".js-game-restext");function T(e,t){var n=e-.5+Math.random()*(t-e+1);return n=Math.round(n)}var M=function(){function e(){S(this,e),this.lifeCycle=3,this.create()}return k(e,[{key:"create",value:function(){this.element=document.createElement("span"),this.element.className="game__apple",this.element.style="top: ".concat(T(1,window.innerHeight-160),"px; left: ").concat(T(1,window.innerWidth-135),"px;"),this.element.dataset.type=T(1,3),E.appendChild(this.element)}},{key:"destroy",value:function(){this.element.remove()}},{key:"daysGone",value:function(){--this.lifeCycle<=0&&this.element.remove()}}]),e}(),I=function(){function e(){S(this,e),this.points=0,this.time=60,this.apples=[],this.gameEnd=!1,this.gameStart=!1,this.gameField=E,this.observer(),this.eventListerer(),window.location.hash&&"wantgame"===window.location.hash.substring(1)&&window.innerWidth>767&&(E.classList.add("start"),this.timerStart(),this.gameStart=!0,document.body.classList.add("game-start"))}return k(e,[{key:"observer",value:function(){var e=this;this.gameEnd||(this.apples.forEach(function(t,n){t.daysGone(),t.lifeCycle<=0&&e.apples.splice(n,1)}),this.apples.length<3&&this.apples.push(new M),setTimeout(this.observer.bind(this),this.gameStart?150+150*(80-this.points)/80:1e3))}},{key:"eventListerer",value:function(){var e=this;E.addEventListener("click",function(t){for(var n=t.target;n&&"game__apple"!==n.className;)n=n.parentNode;n&&E.classList.contains("start")&&(n.classList.add("kill"),e.points++,e.apples.forEach(function(t,n){t.element.classList.contains("kill")&&(t.destroy(),e.apples.splice(n,1))})),n&&!e.gameStart&&(E.classList.add("start"),e.timerStart(),e.gameStart=!0,document.body.classList.add("game-start"))},!1),_.addEventListener("click",function(){e.gameEnd=!1,E.classList.remove("end"),E.classList.add("start"),e.observer()})}},{key:"textChanger",value:function(e){x.innerHTML=e>75?"\n        <p>Вот это да! ".concat(e," в минуту. Вы там не жульничали, случайно? Возможно все дело в том, что Кубань у вас в крови.</p>\n        <p>Вам не за чем пробовать еще раз. Если только вы не хотите устроить мастер-класс.</p>\n      "):e>=55?"\n        <p>Отличный результат. ".concat(e," в минуту. Вы очень хорошо собираете яблоки. Приезжайте к нам на Кубань.</p>\n        <p>Или хотите попробовать еще разок?</p>\n      "):"\n        <p>Что-то слабовато. Всего ".concat(e," в минуту. Вы явно еще не бывали на Кубани. Или вы просто съели половину собранных яблок?</p>\n        <p>Хотите попробовать еще разок?</p>\n      ")}},{key:"timerStart",value:function(){var e=("0"+Math.floor(this.time/60)).slice(-2),t=("0"+this.time%60).slice(-2);"00"!==e||"00"!==t?(j.textContent="".concat(e,":").concat(t),this.time--,setTimeout(this.timerStart.bind(this),1e3)):(j.textContent="00:00",this.textChanger(this.points),C.textContent=this.points,this.gameEnd=!0,E.classList.remove("start"),E.classList.add("end"),this.gameDrop())}},{key:"gameDrop",value:function(){document.body.classList.remove("game-start"),j.textContent="01:00",this.apples.forEach(function(e){return e.destroy()}),this.gameStart=!1,this.points=0,this.time=60}}]),e}();function H(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var q=function(){function e(t,n,i,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.init({videos:r(t),popup:o(n),popupClose:r(i),popupContent:o(a)})}var t,n,i;return t=e,(n=[{key:"init",value:function(e){var t=e.videos,n=e.popup,r=e.popupContent;e.popupClose.forEach(function(e){e.addEventListener("click",function(){r.innerHTML="",n.classList.remove("open"),document.body.classList.remove("popup-open")})}),t.forEach(function(e){e.addEventListener("click",function(t){var i=e.getAttribute("href");n.classList.add("open"),document.body.classList.add("popup-open"),r.innerHTML='\n          <video class="popup__video js-popup-video" preload autoplay>\n            <source src="'.concat(i,"\" type='video/mp4'>\n          </video>"),o(".js-popup-video").addEventListener("ended",function(){r.innerHTML="",n.classList.remove("open"),document.body.classList.remove("popup-open")}),t.preventDefault()})})}}])&&H(t.prototype,n),i&&H(t,i),e}();document.addEventListener("DOMContentLoaded",function(){var e;new u;document.body.classList.contains("index")&&new c(22).preload();o(".js-contacts-map")&&new p("contacts-map").init();if(o(".js-sticky"))new f(200,0);if(o(".js-iproducts"))new b;if(o(".js-video"))new q(".js-video",".js-popup",".js-popup-close, js-popup-bg",".js-popup-content");if(r(".js-share").length){var t=!0,n=!1,s=void 0;try{for(var l,d=r(".js-share")[Symbol.iterator]();!(t=(l=d.next()).done);t=!0){l.value.addEventListener("click",function(e){e.preventDefault()})}}catch(e){n=!0,s=e}finally{try{t||null==d.return||d.return()}finally{if(n)throw s}}window.share=new g}if(r(".js-scenes").length)new y;if(/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream&&document.querySelector("html").classList.add("ios"),o(".js-game"))new I;new i,new a([".about__img",".about p, .about__clients, .catalog__img, .catalog__elem-img"]);try{e=new Event("scroll")}catch(t){(e=document.createEvent("Event")).initEvent("scroll",!1,!1)}window.dispatchEvent(e)})}]);